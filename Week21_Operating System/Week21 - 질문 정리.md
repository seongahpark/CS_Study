# Week 21 - 질문 정리

[출처 - Gyoogle Interview 중 OS](https://gyoogle.dev/blog/interview/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C.html)

1. **프로세스와 스레드 차이**

   프로세스는 메모리 상에서 실행중인 프로그램을 말하며, 스레드는 이 프로세스 안에서 실행되는 흐름 단위를 말함

   프로세스마다 최소 하나의 스레드를 보유하고 있으며, 각각 별도의 주소공간을 독립적으로 할당 받는다 (code, data, heap, stack) -> 자신만의 고유 공간과 자원을 할당받아 사용

   스레드는 이중에 stack만 따로 할당받고 나머지 영역은 스레드끼리 서로 공유한다 -> 다른 스레드와 공간과 자원을 공유하면서 사용

   

2. **멀티 프로세스로 처리 가능한 걸 굳이 멀티 스레드로 하는 이유는?**

   프로세스를 생성하여 자원을 할당하는 시스템 콜이 감소함으로써 자원의 효율적 관리가 가능하다

   프로세스 간의 통신(IPC)보다 스레드 간의 통신 비용이 적어 작업들 간 부담이 감소한다

   대신, 멀티 스레드를 사용할 때는 공유 자원으로 인한 문제 해결을 위해 '동기화'에 신경써야 한다

   

3. **교착상태(DeadLock)의 개념과 4가지 조건**

   프로세스가 자원을 얻지 못해 다음 처리를 하지 못하는 상태이다.

   시스템적으로 한정된 자원을 여러 곳에서 사용하려고 할 때 발생하는 문제이다

   교착 상태의 4가지 조건

   - 상호배제 : 프로세스들이 필요로 하는 자원에 대해 배타적 통제권을 요구
   - 점유대기 : 프로세스가 할당된 자원을 가진 상태에서 다른 자원을 기다림
   - 비선점 : 프로세스가 어떤 자원의 사용을 끝날 때 까지 그 자원을 뺏을 수 없음
   - 순환대기 : 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원을 갖고 있음

   이 4가지 조건 중 하나라도 만족하지 않으면 교착상태는 발생하지 않는다

   

4. **교착상태 해결 방법 4가지**

   - 예방
   - 회피
   - 무시
   - 발견

   

5. **메모리 계층 (상-하층 순)**

   - 레지스터
   - 캐시
   - 메모리
   - 하드디스크

   

6. **메모리 할당 알고리즘 First fit, Next fit, Best fit 결과**

   - First fit : 메모리의 처음부터 검사해서 크기가 충분한 첫 번째 메모리에 할당
   - Next fit : 마지막으로 참조한 메모리 공간에서부터 탐색을 시작해 공간을 찾음
   - Best fit : 모든 메모리 공간을 검사해서 내부 단편화를 최소화하는 공간에 할당

   

7. **페이지 교체 알고리즘에 따른 페이지 폴트 방식**

   - OPT : 최적 교체. 앞으로 가장 오랫동안 사용하지 않을 페이지 교체
   - FIFO : 메모리가 할당된 순서대로 페이지를 교체
   - LRU : 최근에 가장 오랫동안 사용하지 않은 페이지를 교체
   - LFU : 사용 빈도가 가장 적은 페이지를 교체
   - NUR : 최근에 사용하지 않은 페이지를 교체

   

8. **외부 단편화와 내부 단편화란?**

   - 외부 단편화 : 작업보다 많은 공간이 있더라도 실제로 그 작업을 받아들일 수 없는 경우 (메모리 배치에 따라 발생하는 문제)
   - 내부 단편화 : 작업에 필요한 공간보다 많은 공간을 할당받음으로써 발생하는 내부의 사용 불가능한 공간

   

9. **가상 메모리란?**

   메모리에 로드된, 실행중인 프로세스가 메모리가 아닌 가상의 공간을 참조해 마치 커다란 물리 메모리를 갖는 것 처럼 사용할 수 있게 해주는 기법

   실제 메모리 안에 공간이 부족하면, 현재 사용하고 있지 않은 데이터를 빼내어 가상 메모리에 저장해두고, 실제 메모리에선 처리만 하게 하는 것이 가상 메모리의 역할이다

   즉, 실제 메모리에 놀고 있는 공간이 없게 계속 일을 시키도록 도와주는 것이 가상 메모리이다.

   

10. **페이징과 세그먼테이션이란?**

    - 페이징 : 페이지 단위의 논리-물리 주소 관리 기법. 논리 주소 공간이 하나의 연속적인 물리 메모리 공간에 들어가야 하는 제약을 해결하기 위한 기법으로 논리 주소 공간과 물리 주소 공간을 분리해야 한다 (주소의 동적 재배치를 허용), 변환을 위한 MMU가 필요하다. 특징은 외부 단편화를 없앨 수 있고, 페이지가 클수록 내부 단편화도 커진다

    - 세그먼테이션 : 사용자/프로그래머 관점의 메모리 관리 기법. 페이징 기법과 같은 크기의 페이지를 갖는 것 과는 다르게 논리적 단위(세그먼트)로 나누므로 미리 분할하는 것이 아니고 메모리를 사용할 시점에 할당된다

      

11. **뮤텍스, 세마포어의 개념과 차이점**

    - 뮤텍스

      상호배제, 제어되는 섹션에 하나의 스레드만 허용되기 때문에, 해당 섹션에 접근하려는 다른 스레드들을 강제적으로 막음으로써 첫 번째 스레드가 해당 섹션을 빠져나올 때 까지 기다리는 것 (대기열 구조라고 생각하면 됨)
      
    - 세마포어

      운영체제에서 공유 자원에 대한 접속을 제어하기 위해 사용되는 신호. 공유 자원에 접근할 수 있는 최대 허옹치만큼만 동시에 사용자 접근 가능. 스레드들은 리소스 접근 요청을 할 수 있고, 세마포어는 카운트가 하나씩 줄어들게 되며 리소스가 모두 사용중인 경우(count=0) 다음 작업은 대기를 하게 됨

    - 차이점

      - 세마포어는 뮤텍스가 될 수 있지만, 뮤텍스는 세마포어가 될 수 없음
      - 세마포어는 소유 불가능하지만, 뮤텍스는 소유 가능
      - 동기화의 개수가 다름

    

12. **Context Switching**

    하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스 상태를 보관하고 새로운 프로세스의 상태를 적재하는 작업

    한 프로세스의 문맥은 그 프로세스의 PCB에 기록됨

    

13. **사용자 수준 스레드 vs 커널 수준 스레드의 차이**

    사용자 수준 스레드

    - 장점 : context switching이 없어 커널 스레드보다 오버 헤드가 적음 (스레드 전환 시 커널 스케줄러 호출이 필요 없기 때문)
    - 단점 : 프로세스 내의 한 스레드가 커널로 진입하는 순간, 나머지 스레드들도 전부 정지됨 (커널이 스레드의 존재를 알지 못하기 때문)

    커널 수준 스레드

    - 장점 : 사용자 수준 스레드보다 효율적. 커널 스레드를 쓰면 멀티프로세서를 활용할 수 있기 때문이다. 사용자 스레드는 CPU가 아무리 많아도 커널 모드의 스케줄이 되지 않아 각 CPU에 효율적으로 스레드를 배당할 수가 없다
    - 단점 : context switching이 발생한다. 이 과정에서 프로세서 모드가 사용자 모드와 커널 모드 사이를 움직여 많이 돌아다닐 수록 성능이 떨어진다

    

14. **fork()와 vfork()의 차이점**

    - fork()는 부모 프로세스의 메모리를 복사해서 사용
    - vfork()는 부모 프로세스와의 메모리를 공유한다. 복사하지 않아 fork()보다 생성 속도가 빠르다. 하지만, 자원을 공유하기 때문에 자원에 대한 race condition이 발생하지 않도록 하기 위해 부모프로세스는 자식 프로세스가 exit하거나 execute가 호출되기 전까지 block 된다

    

15. **Race Condition**

    두 개 이상의 프로세스가 공통 자원을 병행적으로 읽거나 쓸 때, 공용 데이터에 대한 접근이 순서에 따라 실행 결과가 달라지는 상황

    Race Condition이 발생하게 되면, 모든 프로세스에 원하는 결과가 발생하는 것을 보장할 수 없어 이러한 상황을 피해야 하며 상호배제나 임계구역으로 해결이 가능하다

    

16. **리눅스에서 시스템 콜과 서브루틴의 차이**

    서브루틴은 프로그래밍을 할 때 사용하는 대부분의 API

    서브루틴이 시스템 콜을 호출하고, 시스템 콜이 수행한 결과를 서브루틴에 보낸다

    api를 호출해서 사용하는 것이 동일하기 때문에 큰 차이가 없다

    <br>

---

**다음주 주제** - **Interview - 데이터베이스**

> **데이터베이스**



